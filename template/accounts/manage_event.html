{% extends 'accounts/base.html' %}
{% block breadcrumb %}Manage{% endblock breadcrumb %}
{% load crispy_forms_tags %}

{% load static %}

{% block content %}

<div class="main-container">
    <div class="pd-ltr-20 xs-pd-20-10">
        <div class="min-height-200px">
            <div class="page-header">
                <div class="row">
                    <div class="col-md-6 col-sm-12">
                        <div class="title">
                            <h4>List Of All Events</h4>
                        </div>
                        <nav aria-label="breadcrumb" role="navigation">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="{% url 'events:event_home' %}">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Manage Event here</li>
                            </ol>
                        </nav>
                    </div>
                    <div class="col-md-6 col-sm-12 text-right">
                        <div class="dropdown">
                            <a class="btn btn-primary" >
                               {{promotor.amount}} Frfca
                            </a>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">

                <div class="col-xl-12 col-lg-12 col-md-13 col-sm-12 mb-30">
                    <div class="card-box height-100-p overflow-hidden">
                        <div class="profile-tab height-100-p">
                            <div class="tab height-100-p">
                                <ul class="nav nav-tabs customtab" role="tablist">

                                    <li class="nav-item">
                                        <a class="nav-link active" data-toggle="tab" href="#tasks" role="tab">My created
                                            Events</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#timeline" role="tab">My Participed
                                            Events</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#setting" role="tab">Settings</a>
                                    </li>
                                </ul>
                                <div class="tab-content">
                                    <!-- Tasks Tab start -->
                                    <div class="tab-pane fade  active show" id="tasks" role="tabpanel">
                                        <div class="pd-20">
                                            <div class="container pd-12">
                                                <!-- Open Task start -->
                                                <div class="task-title row align-items-center">
                                                    <div class="col-md-8 col-sm-12">
                                                        <h5>All yours events here</h5>
                                                    </div>
                                                    <div class="col-md-4 col-sm-12 text-right">
                                                        <a href="task-add" data-toggle="modal" data-target="#task-add"
                                                            class="bg-light-blue btn text-blue weight-500"><i
                                                                class="ion-plus-round button-primary"></i> Add</a>
                                                    </div>
                                                </div>
                                                <div class="col-md-12 profile-task-list pb-30">
                                                    <!-- Simple Datatable start -->
                                                    <div class="card-box mb-30">

                                                        <div class="pb-20">
                                                            {% if eventss %}
                                                            <table class="data-table table stripe hover nowrap">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Event Picture</th>
                                                                        <th class="table-plus datatable-nosort">Name
                                                                        </th>
                                                                        <th>Location</th>
                                                                        <th>Start Date</th>
                                                                        <th>End Date</th>
                                                                        <th class="datatable-nosort">Action</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    {% for event in eventss %}
                                                                    <tr>
                                                                        <td class="table-plus"><img
                                                                                style="width: 150px; height: 150px;"
                                                                                src="{{event.images_baniere.url}}"></td>
                                                                        <td>{{event.name}}</td>
                                                                        <td>{{event.location}}</td>
                                                                        <td>{{event.event_start_date}}</td>
                                                                        <td>{{event.event_end_date}}</td>
                                                                        <td>
                                                                            <div class="dropdown">
                                                                                <a class="btn btn-link font-24 p-0 line-height-1 no-arrow dropdown-toggle"
                                                                                    href="#" role="button"
                                                                                    data-toggle="dropdown">
                                                                                    <i class="dw dw-more"></i>
                                                                                </a>
                                                                                <div
                                                                                    class="dropdown-menu dropdown-menu-right dropdown-menu-icon-list">
                                                                                    <a class="dropdown-item"
                                                                                        href="{% url 'details_of_event' event.slug %}"><i
                                                                                            class="dw dw-eye"></i>
                                                                                        View</a>
                                                                                    <a class="dropdown-item" href="#"><i
                                                                                            class="dw dw-edit2"></i>
                                                                                        Edit</a>
                                                                                    <a class="dropdown-item" href="#"><i
                                                                                            class="dw dw-delete-3"></i>
                                                                                        Delete</a>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                    {% endfor %}
                                                                </tbody>
                                                            </table>
                                                            {% else %}
                                                            <p>You don't have any events yet...</p>
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                    <!-- Simple Datatable End -->
                                                </div>
                                                <!-- Open Task End -->
                                                <!-- Close Task start -->
                                                <div class="task-title row align-items-center">
                                                    <div class="col-md-12 col-sm-12">
                                                        <h5>Evenements en Court</h5>
                                                    </div>
                                                </div>
                                                <div class="profile-task-list close-tasks">
                                                    <ul>

                                                        <li>
                                                            <div class="custom-control custom-checkbox mb-5">
                                                                <input type="checkbox" class="custom-control-input"
                                                                    id="task-close-4" checked="" disabled="">
                                                                <label class="custom-control-label"
                                                                    for="task-close-4"></label>
                                                            </div>
                                                            <div class="task-type">Email</div>
                                                            Lorem ipsum dolor sit amet. Id ea earum.
                                                            <div class="task-assign">Assigned to Ferdinand M. <div
                                                                    class="due-date">due date <span>22 February
                                                                        2018</span></div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <!-- Close Task start -->

                                                <!-- add task popup start -->
                                                <div class="modal fade customscroll" id="task-add" tabindex="-1"
                                                    role="dialog">
                                                    <div class="modal-dialog" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" id="exampleModalLongTitle">Add
                                                                    Event</h5>
                                                                <button type="button" class="close" data-dismiss="modal"
                                                                    aria-label="Close" data-toggle="tooltip"
                                                                    data-placement="bottom" title=""
                                                                    data-original-title="Close Modal">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                            <div class="modal-body pd-12">
                                                                <div class="task-list-form">
                                                                    <ul>
                                                                        <li>
                                                                            <form method="POST"
                                                                                enctype="multipart/form-data"
                                                                                action="{% url 'add_event' %}">
                                                                                {% csrf_token %}
                                                                                <div class="form-group row">
                                                                                    <label class="col-md-4">Name of
                                                                                        Event</label>
                                                                                    <div class="col-md-8">

                                                                                        <input type="text" name="name"
                                                                                            class="form-control" required>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="form-group row">
                                                                                    <label class="col-md-4">Input
                                                                                        Tags</label>
                                                                                    <div class="col-md-8">

                                                                                        <input type="text" name="tag"
                                                                                            class="form-control" required>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="form-group row">
                                                                                    <label
                                                                                        class="col-md-4">Cathegories</label>
                                                                                    <div class="col-md-8">
                                                                                        <select name="category"
                                                                                            class="selectpicker form-control">
                                                                                            {% for c in ctg %}
                                                                                            <option value="{{c.name}}">
                                                                                                {{c.name}}</option>
                                                                                            {% endfor %}
                                                                                        </select>

                                                                                    </div>
                                                                                </div>
                                                                                <div class="form-group row">
                                                                                    <label
                                                                                        class="col-md-4">Location</label>
                                                                                    <div class="col-md-8">
                                                                                        <input type="text"
                                                                                            name="location"
                                                                                            class="form-control" required> 

                                                                                    </div>
                                                                                </div>
                                                                                <a href="javascript:;"
                                                                                    class="remove-task"
                                                                                    data-toggle="tooltip"
                                                                                    data-placement="bottom" title=""
                                                                                    data-original-title="Remove Task"><i
                                                                                        class="ion-minus-circled"></i></a>

                                                                                <div class="form-group row">
                                                                                    <label class="col-md-4">Start
                                                                                        Date</label>
                                                                                    <div class="col-md-8">
                                                                                        <input type="date" name="sdate"
                                                                                            class="form-control" required>

                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group row">
                                                                                    <label class="col-md-4">Start
                                                                                        Time</label>
                                                                                    <div class="col-md-8">
                                                                                        <input type="time" name="stime"
                                                                                            class="form-control" required>

                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group row">
                                                                                    <label class="col-md-4">End
                                                                                        Date</label>
                                                                                    <div class="col-md-8">
                                                                                        <input type="date" name="edate"
                                                                                            class="form-control" required>

                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group row">
                                                                                    <label class="col-md-4">End
                                                                                        Time</label>
                                                                                    <div class="col-md-8">
                                                                                        <input type="time" name="etime"
                                                                                            class="form-control" required>

                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group row">
                                                                                    <label class="col-md-4">Image
                                                                                        Principal</label>
                                                                                    <div class="col-md-8">
                                                                                        <input type="file"
                                                                                            name="imgbaniere"
                                                                                            class="form-control" required>

                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group row">
                                                                                    <label class="col-md-4">Another
                                                                                        Image</label>
                                                                                    <div class="col-md-8">
                                                                                        <input type="file"
                                                                                            name="imganother"
                                                                                            class="form-control" required>

                                                                                    </div>
                                                                                </div>

                                                                                <!-- <div class="html-editor pd-20 card-box mb-30">
                                                                                        <label class="col-md-4">Description</label>
                                                                                        <div class="col-md-3">
                                                                                            {{ form.description }}
                                                                                            
                                                                                        </div>
                                                                                    </div> -->

                                                                                <div
                                                                                    class="html-editor pd-20 card-box mb-30">
                                                                                    <h4 class="h4 text-blue">Your
                                                                                        Description Here</h4>

                                                                                    <textarea name="desc"
                                                                                        class="textarea_editor form-control border-radius-0"
                                                                                        placeholder="Enter text ..." required></textarea>
                                                                                </div>

                                                                                <div class="modal-footer">
                                                                                    <input class="btn btn-primary" id="sa-success"
                                                                                        type="submit"
                                                                                        value="Add Your Event">
                                                                                    <button type="button"
                                                                                        class="btn btn-secondary"
                                                                                        data-dismiss="modal">Close</button>
                                                                                </div>
                                                                            </form>

                                                                        </li>

                                                                    </ul>
                                                                </div>

                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- add task popup End -->
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Tasks Tab End -->

                                    <!-- Timeline Tab start -->
                                    <div class="tab-pane fade" id="timeline" role="tabpanel">
                                        <div class="pd-20">
                                            <div class="profile-timeline">
                                                <!-- Simple Datatable start -->
                                                <div class="card-box mb-30">

                                                    <div class="pb-20">
                                                        {% if ea %}
                                                        <table class="data-table table stripe hover nowrap">
                                                            <thead>
                                                                <tr>
                                                                    <th>Event Picture</th>
                                                                    <th class="table-plus datatable-nosort">Name
                                                                    </th>
                                                                    <th>Cathegorie</th>
                                                                    <th>Date Achat</th>
                                                                    <th>Quantites</th>
                                                                    <th>Somme Paye</th>
                                                                    <th class="datatable-nosort">Action</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                {% for c in ea %}
                                                                <tr>
                                                                    <td class="table-plus"><img
                                                                            style="width: 150px; height: 150px;"
                                                                            src="{{c.Event_ticket.event.images_baniere.url}}"></td>
                                                                    <td>{{c.Event_ticket.event.name}}</td>
                                                                    <td>{{c.Event_ticket.ticket_cathegories}}</td>
                                                                    <td>{{ c.Ticket_date_achat }}</td>
                                                                    <td>{{ c.Ticket_quantity }}</td>
                                                                    <td>{{ c.Total_amount }}</td>
                                                                    <td>
                                                                        <div class="dropdown">
                                                                            <a class="btn btn-link font-24 p-0 line-height-1 no-arrow dropdown-toggle"
                                                                                href="#" role="button"
                                                                                data-toggle="dropdown">
                                                                                <i class="dw dw-more"></i>
                                                                            </a>
                                                                            <div
                                                                                class="dropdown-menu dropdown-menu-right dropdown-menu-icon-list">
                                                                                <a class="dropdown-item"
                                                                                    href="{% url 'events:pdfview' c.pk %}"><i
                                                                                        class="dw dw-eye"></i>
                                                                                    View</a>
                                                                                <a class="dropdown-item" href="{% url 'events:pdfnew' c.pk %}"><i
                                                                                        class="dw dw-edit2"></i>
                                                                                    Dowload</a>
                                                                                <a class="dropdown-item" href="#"><i
                                                                                        class="dw dw-delete-3"></i>
                                                                                    Delete</a>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                {% endfor %}
                                                            </tbody>
                                                        </table>
                                                        {% else %}
                                                        <p>You don't have any events yet...</p>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <!-- Simple Datatable End -->
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Timeline Tab End -->
                                    <!-- Setting Tab start -->
                                    <div class="tab-pane fade height-100-p" id="setting" role="tabpanel">
                                        <div class="profile-setting">
                                            <form>
                                                <ul class="profile-edit-list row">

                                                </ul>
                                            </form>
                                        </div>
                                    </div>
                                    <!-- Setting Tab End -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-wrap pd-20 mb-20 card-box">
            Eventick<a href="#" target="_blank">Groupe 6</a>
        </div>
    </div>
</div>
{% endblock content %}